<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\user Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;5.0</span>
   </div>
   <div id="projectbrief">Moodle 5.0+ (Build: 20250530) (1260cb24b83)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../d1/d42/classcore_1_1user.html">user</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../dc/d3d/classcore_1_1user-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\user Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5d10c1d80980ad857deafe711d3693b4" id="r_a5d10c1d80980ad857deafe711d3693b4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d10c1d80980ad857deafe711d3693b4">awaiting_action</a> (?stdClass $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>=null)</td></tr>
<tr class="memdesc:a5d10c1d80980ad857deafe711d3693b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the user expected to perform an action to start using <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> properly?  <br /></td></tr>
<tr class="separator:a5d10c1d80980ad857deafe711d3693b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e457fccf51d504f2072151d50dd3be7" id="r_a6e457fccf51d504f2072151d50dd3be7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e457fccf51d504f2072151d50dd3be7">can_edit_preference</a> ($preferencename, $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>)</td></tr>
<tr class="memdesc:a6e457fccf51d504f2072151d50dd3be7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can current user edit preference of this/another user.  <br /></td></tr>
<tr class="separator:a6e457fccf51d504f2072151d50dd3be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac8abdb422c1126e39968aa7b6c96c8" id="r_a7ac8abdb422c1126e39968aa7b6c96c8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ac8abdb422c1126e39968aa7b6c96c8">clean_data</a> ($<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>)</td></tr>
<tr class="memdesc:a7ac8abdb422c1126e39968aa7b6c96c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean the user data.  <br /></td></tr>
<tr class="separator:a7ac8abdb422c1126e39968aa7b6c96c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48e4b2cee01ca4810d14c4d6317b7c1f" id="r_a48e4b2cee01ca4810d14c4d6317b7c1f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48e4b2cee01ca4810d14c4d6317b7c1f">clean_field</a> ($data, $field)</td></tr>
<tr class="memdesc:a48e4b2cee01ca4810d14c4d6317b7c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean a specific user field.  <br /></td></tr>
<tr class="separator:a48e4b2cee01ca4810d14c4d6317b7c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ce73d0fcdb56ddfecfc6fb308eace4" id="r_ad2ce73d0fcdb56ddfecfc6fb308eace4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad2ce73d0fcdb56ddfecfc6fb308eace4">clean_preference</a> ($value, $preferencename)</td></tr>
<tr class="memdesc:ad2ce73d0fcdb56ddfecfc6fb308eace4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean value of a user preference.  <br /></td></tr>
<tr class="separator:ad2ce73d0fcdb56ddfecfc6fb308eace4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f51171d5fa39d76d7b17f64d21c234" id="r_a45f51171d5fa39d76d7b17f64d21c234"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a45f51171d5fa39d76d7b17f64d21c234">get_dummy_fullname</a> (?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a> $<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a>=null, array $options=[])</td></tr>
<tr class="memdesc:a45f51171d5fa39d76d7b17f64d21c234"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return fullname of a dummy user comprised of configured name fields only.  <br /></td></tr>
<tr class="separator:a45f51171d5fa39d76d7b17f64d21c234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81ce27a63e055935077db40321173d13" id="r_a81ce27a63e055935077db40321173d13"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81ce27a63e055935077db40321173d13">get_fullname</a> (stdClass $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>, ?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a> $<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a>=null, array $options=[])</td></tr>
<tr class="memdesc:a81ce27a63e055935077db40321173d13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return full name depending on context.  <br /></td></tr>
<tr class="separator:a81ce27a63e055935077db40321173d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2711a35572d818dd9c87b88eae0d586a" id="r_a2711a35572d818dd9c87b88eae0d586a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2711a35572d818dd9c87b88eae0d586a">get_initials</a> (stdClass $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>)</td></tr>
<tr class="memdesc:a2711a35572d818dd9c87b88eae0d586a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get initials for users.  <br /></td></tr>
<tr class="separator:a2711a35572d818dd9c87b88eae0d586a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aced64db1cc6607977f664c3cf70ffe" id="r_a5aced64db1cc6607977f664c3cf70ffe"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5aced64db1cc6607977f664c3cf70ffe">get_name_placeholders</a> (stdClass $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>)</td></tr>
<tr class="memdesc:a5aced64db1cc6607977f664c3cf70ffe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an array of name placeholders for a given user.  <br /></td></tr>
<tr class="separator:a5aced64db1cc6607977f664c3cf70ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417a2e45554ff6b824e64cf204754e22" id="r_a417a2e45554ff6b824e64cf204754e22"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a417a2e45554ff6b824e64cf204754e22">get_noreply_user</a> ()</td></tr>
<tr class="memdesc:a417a2e45554ff6b824e64cf204754e22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return noreply user record, this is currently used in messaging system only for sending messages from noreply email.  <br /></td></tr>
<tr class="separator:a417a2e45554ff6b824e64cf204754e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f3a29849a8c37f7a55e42a53635770" id="r_aa5f3a29849a8c37f7a55e42a53635770"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5f3a29849a8c37f7a55e42a53635770">get_preference_definition</a> ($preferencename)</td></tr>
<tr class="memdesc:aa5f3a29849a8c37f7a55e42a53635770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the preference definition.  <br /></td></tr>
<tr class="separator:aa5f3a29849a8c37f7a55e42a53635770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef7b06007031e2a32fbedc7c80e7fe8" id="r_aeef7b06007031e2a32fbedc7c80e7fe8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeef7b06007031e2a32fbedc7c80e7fe8">get_profile_picture</a> (stdClass $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>, ?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a> $<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a>=null, array $options=[])</td></tr>
<tr class="memdesc:aeef7b06007031e2a32fbedc7c80e7fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return user picture depending on context.  <br /></td></tr>
<tr class="separator:aeef7b06007031e2a32fbedc7c80e7fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8ddd62071be55d18e89307acf52f65" id="r_a6c8ddd62071be55d18e89307acf52f65"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c8ddd62071be55d18e89307acf52f65">get_profile_url</a> (stdClass $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>, ?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a> $<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a>=null)</td></tr>
<tr class="memdesc:a6c8ddd62071be55d18e89307acf52f65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return profile url depending on context.  <br /></td></tr>
<tr class="separator:a6c8ddd62071be55d18e89307acf52f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d6ba6f90c8159bc0e674c731f2b4dc" id="r_a58d6ba6f90c8159bc0e674c731f2b4dc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58d6ba6f90c8159bc0e674c731f2b4dc">get_property_choices</a> ($property)</td></tr>
<tr class="memdesc:a58d6ba6f90c8159bc0e674c731f2b4dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the choices of the property.  <br /></td></tr>
<tr class="separator:a58d6ba6f90c8159bc0e674c731f2b4dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1fa185d7002a4701dd1e95f03ec23b0" id="r_aa1fa185d7002a4701dd1e95f03ec23b0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1fa185d7002a4701dd1e95f03ec23b0">get_property_default</a> ($property)</td></tr>
<tr class="memdesc:aa1fa185d7002a4701dd1e95f03ec23b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the property default.  <br /></td></tr>
<tr class="separator:aa1fa185d7002a4701dd1e95f03ec23b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaa2db70d05ca4b3dc50e57fe81c7abe" id="r_afaa2db70d05ca4b3dc50e57fe81c7abe"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afaa2db70d05ca4b3dc50e57fe81c7abe">get_property_definition</a> ($property)</td></tr>
<tr class="memdesc:afaa2db70d05ca4b3dc50e57fe81c7abe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get properties of a user field.  <br /></td></tr>
<tr class="separator:afaa2db70d05ca4b3dc50e57fe81c7abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6043755c449cd0ed43cde420bc0aac60" id="r_a6043755c449cd0ed43cde420bc0aac60"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6043755c449cd0ed43cde420bc0aac60">get_property_null</a> ($property)</td></tr>
<tr class="memdesc:a6043755c449cd0ed43cde420bc0aac60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discover if the property is NULL_ALLOWED or NULL_NOT_ALLOWED.  <br /></td></tr>
<tr class="separator:a6043755c449cd0ed43cde420bc0aac60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c817909bba0bf0d33852bc91b8d7ca7" id="r_a4c817909bba0bf0d33852bc91b8d7ca7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c817909bba0bf0d33852bc91b8d7ca7">get_property_type</a> ($property)</td></tr>
<tr class="memdesc:a4c817909bba0bf0d33852bc91b8d7ca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the parameter type of the property.  <br /></td></tr>
<tr class="separator:a4c817909bba0bf0d33852bc91b8d7ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca37ccfdb0dd6b15979e88bd6986e4bb" id="r_aca37ccfdb0dd6b15979e88bd6986e4bb"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aca37ccfdb0dd6b15979e88bd6986e4bb">get_support_user</a> ()</td></tr>
<tr class="memdesc:aca37ccfdb0dd6b15979e88bd6986e4bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return support user record, this is currently used in messaging system only for sending messages to support email.  <br /></td></tr>
<tr class="separator:aca37ccfdb0dd6b15979e88bd6986e4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721b27015304d8a268bb2b11c7c196e8" id="r_a721b27015304d8a268bb2b11c7c196e8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a721b27015304d8a268bb2b11c7c196e8">get_user</a> ($userid, $<a class="el" href="../../df/d37/classcore__user_1_1fields.html">fields</a>=' *', $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:a721b27015304d8a268bb2b11c7c196e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return user object from db or create noreply or support user, if userid matches <a class="el" href="#a2a86506c18df1f8156431ed397d789f1" title="No reply user id.">core\user\NOREPLY_USER</a> or core\user::SUPPORT_USER respectively.  <br /></td></tr>
<tr class="separator:a721b27015304d8a268bb2b11c7c196e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a528b68ed0db117036855ec118353b33f" id="r_a528b68ed0db117036855ec118353b33f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a528b68ed0db117036855ec118353b33f">get_user_by_email</a> ($email, $<a class="el" href="../../df/d37/classcore__user_1_1fields.html">fields</a>=' *', $mnethostid=null, $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:a528b68ed0db117036855ec118353b33f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return user object from db based on their email.  <br /></td></tr>
<tr class="separator:a528b68ed0db117036855ec118353b33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57ad92387623fe095029d08328a1037c" id="r_a57ad92387623fe095029d08328a1037c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57ad92387623fe095029d08328a1037c">get_user_by_idnumber</a> (string $idnumber, string $<a class="el" href="../../df/d37/classcore__user_1_1fields.html">fields</a>=' *', ?int $mnethostid=null, int $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>,)</td></tr>
<tr class="memdesc:a57ad92387623fe095029d08328a1037c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return User object based on their idnumber.  <br /></td></tr>
<tr class="separator:a57ad92387623fe095029d08328a1037c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83a25303a2859c8ef465558311cffd68" id="r_a83a25303a2859c8ef465558311cffd68"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83a25303a2859c8ef465558311cffd68">get_user_by_username</a> ($username, $<a class="el" href="../../df/d37/classcore__user_1_1fields.html">fields</a>=' *', $mnethostid=null, $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:a83a25303a2859c8ef465558311cffd68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return user object from db based on their username.  <br /></td></tr>
<tr class="separator:a83a25303a2859c8ef465558311cffd68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9d8f51fad43d1d5676eded6ce70735" id="r_a8d9d8f51fad43d1d5676eded6ce70735"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d9d8f51fad43d1d5676eded6ce70735">get_users_search_sql</a> (<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a> $<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a>, string $usersearch='')</td></tr>
<tr class="memdesc:a8d9d8f51fad43d1d5676eded6ce70735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare SQL where clause and associated parameters for any user searching being performed.  <br /></td></tr>
<tr class="separator:a8d9d8f51fad43d1d5676eded6ce70735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627528624a55728c52fed82574b31f94" id="r_a627528624a55728c52fed82574b31f94"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a627528624a55728c52fed82574b31f94">is_current_user</a> (stdClass $<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>)</td></tr>
<tr class="memdesc:a627528624a55728c52fed82574b31f94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the given user ID is that of the current user.  <br /></td></tr>
<tr class="separator:a627528624a55728c52fed82574b31f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18376fdc0416deb27ed30aaf9e329545" id="r_a18376fdc0416deb27ed30aaf9e329545"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18376fdc0416deb27ed30aaf9e329545">is_real_user</a> ($userid, $checkdb=false)</td></tr>
<tr class="memdesc:a18376fdc0416deb27ed30aaf9e329545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if user id is greater than 0 and alternatively check db.  <br /></td></tr>
<tr class="separator:a18376fdc0416deb27ed30aaf9e329545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7935ebc7b59381edb6d58bc9f79a15ef" id="r_a7935ebc7b59381edb6d58bc9f79a15ef"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7935ebc7b59381edb6d58bc9f79a15ef">require_active_user</a> ($<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>, $checksuspended=false, $checknologin=false)</td></tr>
<tr class="memdesc:a7935ebc7b59381edb6d58bc9f79a15ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the given user is an active user in the site.  <br /></td></tr>
<tr class="separator:a7935ebc7b59381edb6d58bc9f79a15ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7478e57a837283ecfe8cf77b7d2e9c04" id="r_a7478e57a837283ecfe8cf77b7d2e9c04"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7478e57a837283ecfe8cf77b7d2e9c04">reset_caches</a> ()</td></tr>
<tr class="memdesc:a7478e57a837283ecfe8cf77b7d2e9c04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean the properties cache.  <br /></td></tr>
<tr class="separator:a7478e57a837283ecfe8cf77b7d2e9c04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad51da63c1ae1d53381b5043f661326" id="r_a7ad51da63c1ae1d53381b5043f661326"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ad51da63c1ae1d53381b5043f661326">reset_internal_users</a> ()</td></tr>
<tr class="memdesc:a7ad51da63c1ae1d53381b5043f661326"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset self::$noreplyuser and self::$supportuser.  <br /></td></tr>
<tr class="separator:a7ad51da63c1ae1d53381b5043f661326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fae20fc41702181c99c2b43c0fa1f9c" id="r_a3fae20fc41702181c99c2b43c0fa1f9c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fae20fc41702181c99c2b43c0fa1f9c">search</a> ( $query, ?context_course $coursecontext=null, $max=30, $querylimit=5)</td></tr>
<tr class="memdesc:a3fae20fc41702181c99c2b43c0fa1f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for users by name, possibly within a specified context, with current user's access.  <br /></td></tr>
<tr class="separator:a3fae20fc41702181c99c2b43c0fa1f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1262811f407a99a2291d4d60a3050c" id="r_a1a1262811f407a99a2291d4d60a3050c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a1262811f407a99a2291d4d60a3050c">update_picture</a> (stdClass $usernew, $filemanageroptions=[])</td></tr>
<tr class="memdesc:a1a1262811f407a99a2291d4d60a3050c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the provided users profile picture based upon the expected fields returned from the edit or edit_advanced forms.  <br /></td></tr>
<tr class="separator:a1a1262811f407a99a2291d4d60a3050c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5739c327cb3fcf5de0c2cc7bcd6cc8f5" id="r_a5739c327cb3fcf5de0c2cc7bcd6cc8f5"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5739c327cb3fcf5de0c2cc7bcd6cc8f5">validate</a> ($data)</td></tr>
<tr class="memdesc:a5739c327cb3fcf5de0c2cc7bcd6cc8f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate user data.  <br /></td></tr>
<tr class="separator:a5739c327cb3fcf5de0c2cc7bcd6cc8f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98568d197f258de1f125f5417269651d" id="r_a98568d197f258de1f125f5417269651d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98568d197f258de1f125f5417269651d">welcome_message</a> ()</td></tr>
<tr class="memdesc:a98568d197f258de1f125f5417269651d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get welcome message.  <br /></td></tr>
<tr class="separator:a98568d197f258de1f125f5417269651d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aa02df68c5c8821ec1ff66d47c028ad56" id="r_aa02df68c5c8821ec1ff66d47c028ad56"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa02df68c5c8821ec1ff66d47c028ad56">AUTHSYNCFIELDS</a></td></tr>
<tr class="memdesc:aa02df68c5c8821ec1ff66d47c028ad56"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of fields that can be synched/locked during authentication.  <br /></td></tr>
<tr class="separator:aa02df68c5c8821ec1ff66d47c028ad56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56327ac7e2551f226d879a756608a7f2" id="r_a56327ac7e2551f226d879a756608a7f2"><td class="memItemLeft" align="right" valign="top"><a id="a56327ac7e2551f226d879a756608a7f2" name="a56327ac7e2551f226d879a756608a7f2"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MAILDISPLAY_COURSE_MEMBERS_ONLY</b> = 2</td></tr>
<tr class="memdesc:a56327ac7e2551f226d879a756608a7f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display email address to course members only. <br /></td></tr>
<tr class="separator:a56327ac7e2551f226d879a756608a7f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2669367c896a2dd90ffd576b1a0590a0" id="r_a2669367c896a2dd90ffd576b1a0590a0"><td class="memItemLeft" align="right" valign="top"><a id="a2669367c896a2dd90ffd576b1a0590a0" name="a2669367c896a2dd90ffd576b1a0590a0"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MAILDISPLAY_EVERYONE</b> = 1</td></tr>
<tr class="memdesc:a2669367c896a2dd90ffd576b1a0590a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display email address to everyone. <br /></td></tr>
<tr class="separator:a2669367c896a2dd90ffd576b1a0590a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29c33350ea03f03b85c170049e4955e" id="r_ab29c33350ea03f03b85c170049e4955e"><td class="memItemLeft" align="right" valign="top"><a id="ab29c33350ea03f03b85c170049e4955e" name="ab29c33350ea03f03b85c170049e4955e"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MAILDISPLAY_HIDE</b> = 0</td></tr>
<tr class="memdesc:ab29c33350ea03f03b85c170049e4955e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hide email address from everyone. <br /></td></tr>
<tr class="separator:ab29c33350ea03f03b85c170049e4955e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a86506c18df1f8156431ed397d789f1" id="r_a2a86506c18df1f8156431ed397d789f1"><td class="memItemLeft" align="right" valign="top"><a id="a2a86506c18df1f8156431ed397d789f1" name="a2a86506c18df1f8156431ed397d789f1"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>NOREPLY_USER</b> = -10</td></tr>
<tr class="memdesc:a2a86506c18df1f8156431ed397d789f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">No reply user id. <br /></td></tr>
<tr class="separator:a2a86506c18df1f8156431ed397d789f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3da03d50111e6d5d785206dd9595fd4" id="r_ad3da03d50111e6d5d785206dd9595fd4"><td class="memItemLeft" align="right" valign="top"><a id="ad3da03d50111e6d5d785206dd9595fd4" name="ad3da03d50111e6d5d785206dd9595fd4"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>SUPPORT_USER</b> = -20</td></tr>
<tr class="memdesc:ad3da03d50111e6d5d785206dd9595fd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Support user id. <br /></td></tr>
<tr class="separator:ad3da03d50111e6d5d785206dd9595fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee6d3ce9f60c8bb2ce3024f33179074d" id="r_aee6d3ce9f60c8bb2ce3024f33179074d"><td class="memItemLeft" align="right" valign="top"><a id="aee6d3ce9f60c8bb2ce3024f33179074d" name="aee6d3ce9f60c8bb2ce3024f33179074d"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VIEWPROFILE_DO_NOT_PREVENT</b> = 0</td></tr>
<tr class="memdesc:aee6d3ce9f60c8bb2ce3024f33179074d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that user profile view should not be prevented. <br /></td></tr>
<tr class="separator:aee6d3ce9f60c8bb2ce3024f33179074d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561868931f420eb549eed08848d34f94" id="r_a561868931f420eb549eed08848d34f94"><td class="memItemLeft" align="right" valign="top"><a id="a561868931f420eb549eed08848d34f94" name="a561868931f420eb549eed08848d34f94"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VIEWPROFILE_FORCE_ALLOW</b> = 1</td></tr>
<tr class="memdesc:a561868931f420eb549eed08848d34f94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that user profile view should be allowed even if <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> would prevent it. <br /></td></tr>
<tr class="separator:a561868931f420eb549eed08848d34f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aacd376c123fbfd22be69fa915411a5" id="r_a4aacd376c123fbfd22be69fa915411a5"><td class="memItemLeft" align="right" valign="top"><a id="a4aacd376c123fbfd22be69fa915411a5" name="a4aacd376c123fbfd22be69fa915411a5"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VIEWPROFILE_PREVENT</b> = -1</td></tr>
<tr class="memdesc:a4aacd376c123fbfd22be69fa915411a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that user profile view should be prevented. <br /></td></tr>
<tr class="separator:a4aacd376c123fbfd22be69fa915411a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a35eeec5d9b35484c3173615f5815c2d6" id="r_a35eeec5d9b35484c3173615f5815c2d6"><td class="memItemLeft" align="right" valign="top"><a id="a35eeec5d9b35484c3173615f5815c2d6" name="a35eeec5d9b35484c3173615f5815c2d6"></a>
static stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$noreplyuser</b> = false</td></tr>
<tr class="memdesc:a35eeec5d9b35484c3173615f5815c2d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep record of noreply user <br /></td></tr>
<tr class="separator:a35eeec5d9b35484c3173615f5815c2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a577e830dabb660c3fb45f6c45f50fc15" id="r_a577e830dabb660c3fb45f6c45f50fc15"><td class="memItemLeft" align="right" valign="top"><a id="a577e830dabb660c3fb45f6c45f50fc15" name="a577e830dabb660c3fb45f6c45f50fc15"></a>
static stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$supportuser</b> = false</td></tr>
<tr class="memdesc:a577e830dabb660c3fb45f6c45f50fc15"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep record of support user <br /></td></tr>
<tr class="separator:a577e830dabb660c3fb45f6c45f50fc15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:aaa99f0ed7b662d19589f08a764776f04" id="r_aaa99f0ed7b662d19589f08a764776f04"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa99f0ed7b662d19589f08a764776f04">default_preference_permission_check</a> ($<a class="el" href="../../d0/dba/classcore_1_1context_1_1user.html">user</a>, $preferencename)</td></tr>
<tr class="memdesc:aaa99f0ed7b662d19589f08a764776f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default callback used for checking if current user is allowed to change permission of user $user.  <br /></td></tr>
<tr class="separator:aaa99f0ed7b662d19589f08a764776f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28d4d33fff5287f560fd6591ffe10f76" id="r_a28d4d33fff5287f560fd6591ffe10f76"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a28d4d33fff5287f560fd6591ffe10f76">fill_preferences_cache</a> ()</td></tr>
<tr class="memdesc:a28d4d33fff5287f560fd6591ffe10f76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of updateable user preferences and rules for data and access validation.  <br /></td></tr>
<tr class="separator:a28d4d33fff5287f560fd6591ffe10f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75a32239c92aeb5999a0012690c1a3dc" id="r_a75a32239c92aeb5999a0012690c1a3dc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75a32239c92aeb5999a0012690c1a3dc">fill_properties_cache</a> ()</td></tr>
<tr class="memdesc:a75a32239c92aeb5999a0012690c1a3dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of user profile fields and the expected parameter type for data validation.  <br /></td></tr>
<tr class="separator:a75a32239c92aeb5999a0012690c1a3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900f423853ea659451030df37718d829" id="r_a900f423853ea659451030df37718d829"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a900f423853ea659451030df37718d829">get_dummy_user_record</a> ()</td></tr>
<tr class="memdesc:a900f423853ea659451030df37718d829"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to return dummy noreply user record.  <br /></td></tr>
<tr class="separator:a900f423853ea659451030df37718d829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c86fabc10e37942bdf6123912b5a4f3" id="r_a5c86fabc10e37942bdf6123912b5a4f3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c86fabc10e37942bdf6123912b5a4f3">get_enrolled_sql_on_courses_with_capability</a> ($capability)</td></tr>
<tr class="memdesc:a5c86fabc10e37942bdf6123912b5a4f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets an SQL query that lists all enrolled user ids on any course where the current user has the specified capability.  <br /></td></tr>
<tr class="separator:a5c86fabc10e37942bdf6123912b5a4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a60a640349cca8046668bf912f2f3de14" id="r_a60a640349cca8046668bf912f2f3de14"><td class="memItemLeft" align="right" valign="top"><a id="a60a640349cca8046668bf912f2f3de14" name="a60a640349cca8046668bf912f2f3de14"></a>
static array&#160;</td><td class="memItemRight" valign="bottom"><b>$preferencescache</b> = null</td></tr>
<tr class="memdesc:a60a640349cca8046668bf912f2f3de14"><td class="mdescLeft">&#160;</td><td class="mdescRight">store user preferences cache. <br /></td></tr>
<tr class="separator:a60a640349cca8046668bf912f2f3de14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad02e825bd0f3b5c2ef74844cc354360" id="r_aad02e825bd0f3b5c2ef74844cc354360"><td class="memItemLeft" align="right" valign="top"><a id="aad02e825bd0f3b5c2ef74844cc354360" name="aad02e825bd0f3b5c2ef74844cc354360"></a>
static array&#160;</td><td class="memItemRight" valign="bottom"><b>$propertiescache</b> = null</td></tr>
<tr class="memdesc:aad02e825bd0f3b5c2ef74844cc354360"><td class="mdescLeft">&#160;</td><td class="mdescRight">store user fields properties cache. <br /></td></tr>
<tr class="separator:aad02e825bd0f3b5c2ef74844cc354360"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5d10c1d80980ad857deafe711d3693b4" name="a5d10c1d80980ad857deafe711d3693b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d10c1d80980ad857deafe711d3693b4">&#9670;&#160;</a></span>awaiting_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::awaiting_action </td>
          <td>(</td>
          <td class="paramtype">?stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is the user expected to perform an action to start using <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> properly? </p>
<p>This covers cases such as filling the profile, changing password or agreeing to the site policy.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>User object, defaults to the current user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e457fccf51d504f2072151d50dd3be7" name="a6e457fccf51d504f2072151d50dd3be7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e457fccf51d504f2072151d50dd3be7">&#9670;&#160;</a></span>can_edit_preference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::can_edit_preference </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$preferencename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$user</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Can current user edit preference of this/another user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td></td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ac8abdb422c1126e39968aa7b6c96c8" name="a7ac8abdb422c1126e39968aa7b6c96c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ac8abdb422c1126e39968aa7b6c96c8">&#9670;&#160;</a></span>clean_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::clean_data </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean the user data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;array</td><td class="paramname">$user</td><td>the user data to be validated against properties definition. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass#$user</td><td>the cleaned user data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a48e4b2cee01ca4810d14c4d6317b7c1f" name="a48e4b2cee01ca4810d14c4d6317b7c1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48e4b2cee01ca4810d14c4d6317b7c1f">&#9670;&#160;</a></span>clean_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::clean_field </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$field</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean a specific user field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$data</td><td>the user field data to be cleaned. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$field</td><td>the user field name on the property definition cache. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the cleaned user data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2ce73d0fcdb56ddfecfc6fb308eace4" name="ad2ce73d0fcdb56ddfecfc6fb308eace4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ce73d0fcdb56ddfecfc6fb308eace4">&#9670;&#160;</a></span>clean_preference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::clean_preference </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$preferencename</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean value of a user preference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$value</td><td>the user preference value to be cleaned. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td>the user preference name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the cleaned preference value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa99f0ed7b662d19589f08a764776f04" name="aaa99f0ed7b662d19589f08a764776f04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa99f0ed7b662d19589f08a764776f04">&#9670;&#160;</a></span>default_preference_permission_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::default_preference_permission_check </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$preferencename</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default callback used for checking if current user is allowed to change permission of user $user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a28d4d33fff5287f560fd6591ffe10f76" name="a28d4d33fff5287f560fd6591ffe10f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28d4d33fff5287f560fd6591ffe10f76">&#9670;&#160;</a></span>fill_preferences_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::fill_preferences_cache </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition of updateable user preferences and rules for data and access validation. </p>
<p>array( 'preferencename' =&gt; array( // Either exact preference name or a regular expression. 'null' =&gt; NULL_ALLOWED, // Defaults to NULL_NOT_ALLOWED. Takes NULL_NOT_ALLOWED or NULL_ALLOWED. 'type' =&gt; PARAM_TYPE, // Expected parameter type of the user field - mandatory 'choices' =&gt; array(1, 2..) // An array of accepted values of the user field - optional 'default' =&gt; $CFG-&gt;setting // An default value for the field - optional 'isregex' =&gt; false/true // Whether the name of the preference is a regular expression (default false). 'permissioncallback' =&gt; callable // Function accepting arguments ($user, $preferencename) that checks if current // user // is allowed to modify this preference for given user. // If not specified <a class="el" href="#aaa99f0ed7b662d19589f08a764776f04" title="Default callback used for checking if current user is allowed to change permission of user $user.">core\user\default_preference_permission_check()</a> will be assumed. 'cleancallback' =&gt; callable // Custom callback for cleaning value if something more difficult than just type/choices // is needed accepts arguments ($value, $preferencename) ) )</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a75a32239c92aeb5999a0012690c1a3dc" name="a75a32239c92aeb5999a0012690c1a3dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75a32239c92aeb5999a0012690c1a3dc">&#9670;&#160;</a></span>fill_properties_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::fill_properties_cache </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition of user profile fields and the expected parameter type for data validation. </p>
<p>array( 'property_name' =&gt; array( // The user property to be checked. Should match the field on the user table. 'null' =&gt; NULL_ALLOWED, // Defaults to NULL_NOT_ALLOWED. Takes NULL_NOT_ALLOWED or NULL_ALLOWED. 'type' =&gt; PARAM_TYPE, // Expected parameter type of the user field. 'choices' =&gt; array(1, 2..) // An array of accepted values of the user field. 'default' =&gt; $CFG-&gt;setting // An default value for the field. ) )</p>
<p>The fields choices and default are optional.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a45f51171d5fa39d76d7b17f64d21c234" name="a45f51171d5fa39d76d7b17f64d21c234"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f51171d5fa39d76d7b17f64d21c234">&#9670;&#160;</a></span>get_dummy_fullname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_dummy_fullname </td>
          <td>(</td>
          <td class="paramtype">?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$options</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return fullname of a dummy user comprised of configured name fields only. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a900f423853ea659451030df37718d829" name="a900f423853ea659451030df37718d829"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a900f423853ea659451030df37718d829">&#9670;&#160;</a></span>get_dummy_user_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_dummy_user_record </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to return dummy noreply user record. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5c86fabc10e37942bdf6123912b5a4f3" name="a5c86fabc10e37942bdf6123912b5a4f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c86fabc10e37942bdf6123912b5a4f3">&#9670;&#160;</a></span>get_enrolled_sql_on_courses_with_capability()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_enrolled_sql_on_courses_with_capability </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$capability</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets an SQL query that lists all enrolled user ids on any course where the current user has the specified capability. </p>
<p>Helper function used for searching users.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$capability</td><td>Required capability </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array containing SQL and params, or two nulls if there are no courses </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a81ce27a63e055935077db40321173d13" name="a81ce27a63e055935077db40321173d13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81ce27a63e055935077db40321173d13">&#9670;&#160;</a></span>get_fullname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_fullname </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$options</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return full name depending on context. </p>
<p>This function should be used for displaying purposes only as the details may not be the same as it is on database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>the person to get details of. </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>The context will be used to determine the visibility of the user's full name. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>can include: override - if true, will not use forced firstname/lastname settings </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Full name of the user </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2711a35572d818dd9c87b88eae0d586a" name="a2711a35572d818dd9c87b88eae0d586a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2711a35572d818dd9c87b88eae0d586a">&#9670;&#160;</a></span>get_initials()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_initials </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get initials for users. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5aced64db1cc6607977f664c3cf70ffe" name="a5aced64db1cc6607977f664c3cf70ffe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aced64db1cc6607977f664c3cf70ffe">&#9670;&#160;</a></span>get_name_placeholders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_name_placeholders </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates an array of name placeholders for a given user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>The user object containing name fields. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>An associative array of name placeholders. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a417a2e45554ff6b824e64cf204754e22" name="a417a2e45554ff6b824e64cf204754e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417a2e45554ff6b824e64cf204754e22">&#9670;&#160;</a></span>get_noreply_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_noreply_user </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return noreply user record, this is currently used in messaging system only for sending messages from noreply email. </p>
<p>It will return record of $CFG-&gt;noreplyuserid if set else return dummy user object with hard-coded $user-&gt;emailstop = 1 so noreply can be sent to user.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>user record. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa5f3a29849a8c37f7a55e42a53635770" name="aa5f3a29849a8c37f7a55e42a53635770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f3a29849a8c37f7a55e42a53635770">&#9670;&#160;</a></span>get_preference_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_preference_definition </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$preferencename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the preference definition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeef7b06007031e2a32fbedc7c80e7fe8" name="aeef7b06007031e2a32fbedc7c80e7fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeef7b06007031e2a32fbedc7c80e7fe8">&#9670;&#160;</a></span>get_profile_picture()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_profile_picture </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$options</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return user picture depending on context. </p>
<p>This function should be used for displaying purposes only as the details may not be the same as it is on database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>the person to get details of. </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>The context will be used to determine the visibility of the user's picture. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>public properties of {</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>user_picture} to be overridden<ul>
<li>courseid = $this-&gt;page-&gt;course-&gt;id (course id of user profile in link)</li>
<li>size = 35 (size of image)</li>
<li>link = true (make image clickable - the link leads to user profile)</li>
<li>popup = false (open in popup)</li>
<li>alttext = true (add image alt attribute)</li>
<li>class = image class attribute (default 'userpicture')</li>
<li>visibletoscreenreaders = true (whether to be visible to screen readers)</li>
<li>includefullname = false (whether to include the user'<a class="el" href="../../d0/d4a/classs.html">s</a> full name together with the user picture)</li>
<li>includetoken = false (whether to use a token for authentication. True for current user, int value for other user id) </li>
</ul>
</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">user_picture</td><td>User picture object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c8ddd62071be55d18e89307acf52f65" name="a6c8ddd62071be55d18e89307acf52f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c8ddd62071be55d18e89307acf52f65">&#9670;&#160;</a></span>get_profile_url()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_profile_url </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d1/d90/classcore_1_1context.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return profile url depending on context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>the person to get details of. </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>The context will be used to determine the visibility of the user's profile url. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">url</td><td>Profile url of the user </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a58d6ba6f90c8159bc0e674c731f2b4dc" name="a58d6ba6f90c8159bc0e674c731f2b4dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58d6ba6f90c8159bc0e674c731f2b4dc">&#9670;&#160;</a></span>get_property_choices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_property_choices </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$property</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the choices of the property. </p>
<p>This is a helper method to validate a value against a list of acceptable choices. For instance: country, language, themes and etc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">coding_exception</td><td>if the requested property name is invalid or if it does not has a list of choices. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>the property parameter type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1fa185d7002a4701dd1e95f03ec23b0" name="aa1fa185d7002a4701dd1e95f03ec23b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1fa185d7002a4701dd1e95f03ec23b0">&#9670;&#160;</a></span>get_property_default()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_property_default </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$property</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the property default. </p>
<p>This method gets the default value of a field (if exists).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">coding_exception</td><td>if the requested property name is invalid or if it does not has a default value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the property default value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afaa2db70d05ca4b3dc50e57fe81c7abe" name="afaa2db70d05ca4b3dc50e57fe81c7abe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaa2db70d05ca4b3dc50e57fe81c7abe">&#9670;&#160;</a></span>get_property_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_property_definition </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$property</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get properties of a user field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">coding_exception</td><td>if the requested property name is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>the property definition. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6043755c449cd0ed43cde420bc0aac60" name="a6043755c449cd0ed43cde420bc0aac60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6043755c449cd0ed43cde420bc0aac60">&#9670;&#160;</a></span>get_property_null()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_property_null </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$property</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Discover if the property is NULL_ALLOWED or NULL_NOT_ALLOWED. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">coding_exception</td><td>if the requested property name is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the property is NULL_ALLOWED, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4c817909bba0bf0d33852bc91b8d7ca7" name="a4c817909bba0bf0d33852bc91b8d7ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c817909bba0bf0d33852bc91b8d7ca7">&#9670;&#160;</a></span>get_property_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_property_type </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$property</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the parameter type of the property. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">coding_exception</td><td>if the requested property name is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the property parameter type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aca37ccfdb0dd6b15979e88bd6986e4bb" name="aca37ccfdb0dd6b15979e88bd6986e4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca37ccfdb0dd6b15979e88bd6986e4bb">&#9670;&#160;</a></span>get_support_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_support_user </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return support user record, this is currently used in messaging system only for sending messages to support email. </p>
<p>$CFG-&gt;supportuserid is set then returns user record $CFG-&gt;supportemail is set then return dummy record with $CFG-&gt;supportemail else return admin user record with hard-coded $user-&gt;emailstop = 0, so user gets support message.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>user record. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a721b27015304d8a268bb2b11c7c196e8" name="a721b27015304d8a268bb2b11c7c196e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a721b27015304d8a268bb2b11c7c196e8">&#9670;&#160;</a></span>get_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fields</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'*'</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$strictness</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return user object from db or create noreply or support user, if userid matches <a class="el" href="#a2a86506c18df1f8156431ed397d789f1" title="No reply user id.">core\user\NOREPLY_USER</a> or core\user::SUPPORT_USER respectively. </p>
<p>If userid is not found, then return false.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fields</td><td>A comma separated list of user fields to be returned, support and noreply user will not be filtered by this. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found; IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended); MUST_EXIST means throw an exception if no user record or multiple records found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|bool</td><td>user record if found, else false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html" title="DML exception class, use instead of throw new moodle_exception() in dml code.">dml_exception</a></td><td>if user record not found and respective $strictness is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a528b68ed0db117036855ec118353b33f" name="a528b68ed0db117036855ec118353b33f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a528b68ed0db117036855ec118353b33f">&#9670;&#160;</a></span>get_user_by_email()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_user_by_email </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$email</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fields</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'*'</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$mnethostid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$strictness</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return user object from db based on their email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$email</td><td>The email of the user searched. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fields</td><td>A comma separated list of user fields to be returned, support and noreply user. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$mnethostid</td><td>The id of the remote host. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found; IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended); MUST_EXIST means throw an exception if no user record or multiple records found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|bool</td><td>user record if found, else false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html" title="DML exception class, use instead of throw new moodle_exception() in dml code.">dml_exception</a></td><td>if user record not found and respective $strictness is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a57ad92387623fe095029d08328a1037c" name="a57ad92387623fe095029d08328a1037c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57ad92387623fe095029d08328a1037c">&#9670;&#160;</a></span>get_user_by_idnumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_user_by_idnumber </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$idnumber</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fields</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'*'</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$mnethostid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$strictness</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return User object based on their idnumber. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$idnumber</td><td>The idnumber of the user searched. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fields</td><td>A comma separated list of user fields to be returned, support and noreply user. </td></tr>
    <tr><td class="paramtype">null&#160;|&#160;int</td><td class="paramname">$mnethostid</td><td>The id of the remote host. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found; IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended); MUST_EXIST means throw an exception if no user record or multiple records found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|bool</td><td>user record if found, else false. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a83a25303a2859c8ef465558311cffd68" name="a83a25303a2859c8ef465558311cffd68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83a25303a2859c8ef465558311cffd68">&#9670;&#160;</a></span>get_user_by_username()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_user_by_username </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$username</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fields</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'*'</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$mnethostid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$strictness</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return user object from db based on their username. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$username</td><td>The username of the user searched. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fields</td><td>A comma separated list of user fields to be returned, support and noreply user. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$mnethostid</td><td>The id of the remote host. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found; IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended); MUST_EXIST means throw an exception if no user record or multiple records found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|bool</td><td>user record if found, else false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html" title="DML exception class, use instead of throw new moodle_exception() in dml code.">dml_exception</a></td><td>if user record not found and respective $strictness is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8d9d8f51fad43d1d5676eded6ce70735" name="a8d9d8f51fad43d1d5676eded6ce70735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d9d8f51fad43d1d5676eded6ce70735">&#9670;&#160;</a></span>get_users_search_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::get_users_search_sql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d90/classcore_1_1context.html">context</a></td>          <td class="paramname"><span class="paramname"><em>$context</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$usersearch</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare SQL where clause and associated parameters for any user searching being performed. </p>
<p>This mostly came from <a class="el" href="../../df/d2e/classcore__user_1_1table_1_1participants__search.html" title="Class used to fetch participants based on a filterset.">core_user\table\participants_search</a> with some slight modifications four our use case.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td>Context we are in. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usersearch</td><td>Array of field mappings (fieldname =&gt; SQL code for the value) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>SQL query data in the format ['where' =&gt; '', 'params' =&gt; []]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a627528624a55728c52fed82574b31f94" name="a627528624a55728c52fed82574b31f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627528624a55728c52fed82574b31f94">&#9670;&#160;</a></span>is_current_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::is_current_user </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine whether the given user ID is that of the current user. </p>
<p>Useful for components implementing permission callbacks for preferences consumed by {</p><dl class="section see"><dt>See also</dt><dd>fill_preferences_cache}</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18376fdc0416deb27ed30aaf9e329545" name="a18376fdc0416deb27ed30aaf9e329545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18376fdc0416deb27ed30aaf9e329545">&#9670;&#160;</a></span>is_real_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::is_real_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$checkdb</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if user id is greater than 0 and alternatively check db. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$checkdb</td><td>if true userid will be checked in db. By default it's false, and userid is compared with 0 for performance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true is real user else false. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7935ebc7b59381edb6d58bc9f79a15ef" name="a7935ebc7b59381edb6d58bc9f79a15ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7935ebc7b59381edb6d58bc9f79a15ef">&#9670;&#160;</a></span>require_active_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::require_active_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$checksuspended</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$checknologin</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the given user is an active user in the site. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>user object </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$checksuspended</td><td>whether to check if the user has the account suspended </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$checknologin</td><td>whether to check if the user uses the nologin auth method </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">moodle_exception</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.0 </dd></dl>

</div>
</div>
<a id="a7478e57a837283ecfe8cf77b7d2e9c04" name="a7478e57a837283ecfe8cf77b7d2e9c04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7478e57a837283ecfe8cf77b7d2e9c04">&#9670;&#160;</a></span>reset_caches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::reset_caches </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean the properties cache. </p>
<p>During unit tests we need to be able to reset all caches so that each new test starts in a known state. Intended for use only for testing, phpunit calls this before every test. </p>

</div>
</div>
<a id="a7ad51da63c1ae1d53381b5043f661326" name="a7ad51da63c1ae1d53381b5043f661326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ad51da63c1ae1d53381b5043f661326">&#9670;&#160;</a></span>reset_internal_users()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::reset_internal_users </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset self::$noreplyuser and self::$supportuser. </p>
<p>This is only used by phpunit, and there is no other use case for this function. Please don't use it outside phpunit. </p>

</div>
</div>
<a id="a3fae20fc41702181c99c2b43c0fa1f9c" name="a3fae20fc41702181c99c2b43c0fa1f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fae20fc41702181c99c2b43c0fa1f9c">&#9670;&#160;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::search </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$query</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?context_course</td>          <td class="paramname"><span class="paramname"><em>$coursecontext</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$max</em></span><span class="paramdefsep"> = </span><span class="paramdefval">30</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$querylimit</em></span><span class="paramdefsep"> = </span><span class="paramdefval">5</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Searches for users by name, possibly within a specified context, with current user's access. </p>
<p>Deciding which users to search is complicated because it relies on user permissions; ideally, we shouldn't show names if you aren't allowed to see their profile. The permissions for seeing profile are really complicated.</p>
<p>Even if search is restricted to a course, it's possible that other people might have been able to contribute within the course (e.g. they were enrolled before and not now; or people with system-level roles) so if the user has permission we do want to include everyone. However, if there are multiple results then we prioritise the ones who are enrolled in the course.</p>
<p>If you have moodle/user:viewdetails at system level, you can search everyone. Otherwise we check which courses you <em>do</em> have that permission and search everyone who is enrolled on those courses.</p>
<p>Normally you can only search the user's name. If you have the moodle/site:viewuseridentity capability then we also let you search the fields which are listed as identity fields in the 'showuseridentity' config option. For example, this might include the user's ID number or email.</p>
<p>The $max parameter controls the maximum number of users returned. If users are restricted from view for some reason, multiple runs of the main query might be made; the $querylimit parameter allows this to be restricted. Both parameters can be zero to remove limits.</p>
<p>The returned user objects include id, username, all fields required for user pictures, and user identity fields.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$query</td><td>Search query text </td></tr>
    <tr><td class="paramtype">context_course&#160;|&#160;null</td><td class="paramname">$coursecontext</td><td>Course context or null if system-wide </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$max</td><td>Max number of users to return, default 30 (zero = no limit) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$querylimit</td><td>Max number of database queries, default 5 (zero = no limit) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of user objects with limited fields </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a1262811f407a99a2291d4d60a3050c" name="a1a1262811f407a99a2291d4d60a3050c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a1262811f407a99a2291d4d60a3050c">&#9670;&#160;</a></span>update_picture()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::update_picture </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$usernew</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filemanageroptions</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the provided users profile picture based upon the expected fields returned from the edit or edit_advanced forms. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$usernew</td><td>An object that contains some information about the user being updated </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$filemanageroptions</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the user was updated, false if it stayed the same. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5739c327cb3fcf5de0c2cc7bcd6cc8f5" name="a5739c327cb3fcf5de0c2cc7bcd6cc8f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5739c327cb3fcf5de0c2cc7bcd6cc8f5">&#9670;&#160;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::validate </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate user data. </p>
<p>This method just validates each user field and return an array of errors. It doesn't clean the data, the methods clean() and clean_field() should be used for this purpose.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;array</td><td class="paramname">$data</td><td>user data object or array to be validated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|true#$errors</td><td>array of errors found on the user object, true if the validation passed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98568d197f258de1f125f5417269651d" name="a98568d197f258de1f125f5417269651d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98568d197f258de1f125f5417269651d">&#9670;&#160;</a></span>welcome_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\user::welcome_message </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get welcome message. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">lang_string</td><td>welcome message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa02df68c5c8821ec1ff66d47c028ad56" name="aa02df68c5c8821ec1ff66d47c028ad56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa02df68c5c8821ec1ff66d47c028ad56">&#9670;&#160;</a></span>AUTHSYNCFIELDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const core\user::AUTHSYNCFIELDS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= [</div>
<div class="line">        <span class="stringliteral">&#39;firstname&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;lastname&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;email&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;city&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;country&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;lang&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;description&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;idnumber&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;institution&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;department&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;phone1&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;phone2&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;address&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;firstnamephonetic&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;lastnamephonetic&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;middlename&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;alternatename&#39;</span>,</div>
<div class="line">    ]</div>
</div><!-- fragment -->
<p>List of fields that can be synched/locked during authentication. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/<b>user.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 1 2025 03:49:35 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
