<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_cache\cache_lock_interface Interface Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;5.1</span>
   </div>
   <div id="projectbrief">Moodle 5.1dev (Build: 20250613) (c42efe971fe)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d51/namespacecore__cache.html">core_cache</a></li><li class="navelem"><a class="el" href="../../dc/dab/interfacecore__cache_1_1cache__lock__interface.html">cache_lock_interface</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d1/d27/interfacecore__cache_1_1cache__lock__interface-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_cache\cache_lock_interface Interface Reference<div class="ingroups"><a class="el" href="../../dc/d7b/group__core__cache.html">core_cache</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac404cf2654ea4eff898af7452e6af572" id="r_ac404cf2654ea4eff898af7452e6af572"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac404cf2654ea4eff898af7452e6af572">__construct</a> ($name, array $configuration=[])</td></tr>
<tr class="memdesc:ac404cf2654ea4eff898af7452e6af572"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an instance of the cache lock given its name and its configuration data.  <br /></td></tr>
<tr class="separator:ac404cf2654ea4eff898af7452e6af572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b4f2676c189c03ffbe1b344ae2ef48" id="r_a76b4f2676c189c03ffbe1b344ae2ef48"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a76b4f2676c189c03ffbe1b344ae2ef48">__destruct</a> ()</td></tr>
<tr class="memdesc:a76b4f2676c189c03ffbe1b344ae2ef48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up any left over locks.  <br /></td></tr>
<tr class="separator:a76b4f2676c189c03ffbe1b344ae2ef48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a1e51d47090cfb16978d2702e52498" id="r_ab1a1e51d47090cfb16978d2702e52498"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1a1e51d47090cfb16978d2702e52498">check_state</a> ($key, $ownerid)</td></tr>
<tr class="memdesc:ab1a1e51d47090cfb16978d2702e52498"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the state of the given key.  <br /></td></tr>
<tr class="separator:ab1a1e51d47090cfb16978d2702e52498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a531f090e5d8672f97da3e9e2831b4d80" id="r_a531f090e5d8672f97da3e9e2831b4d80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a531f090e5d8672f97da3e9e2831b4d80">lock</a> ($key, $ownerid, $block=false)</td></tr>
<tr class="memdesc:a531f090e5d8672f97da3e9e2831b4d80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires a lock on a given key.  <br /></td></tr>
<tr class="separator:a531f090e5d8672f97da3e9e2831b4d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a472ca5c79f1812d640cb8e045fde2e81" id="r_a472ca5c79f1812d640cb8e045fde2e81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a472ca5c79f1812d640cb8e045fde2e81">unlock</a> ($key, $ownerid, $forceunlock=false)</td></tr>
<tr class="memdesc:a472ca5c79f1812d640cb8e045fde2e81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the lock held on a certain key.  <br /></td></tr>
<tr class="separator:a472ca5c79f1812d640cb8e045fde2e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac404cf2654ea4eff898af7452e6af572" name="ac404cf2654ea4eff898af7452e6af572"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac404cf2654ea4eff898af7452e6af572">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_cache\cache_lock_interface::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$configuration</em></span><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs an instance of the cache lock given its name and its configuration data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>The unique name of the lock instance </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$configuration</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a76b4f2676c189c03ffbe1b344ae2ef48" name="a76b4f2676c189c03ffbe1b344ae2ef48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76b4f2676c189c03ffbe1b344ae2ef48">&#9670;&#160;</a></span>__destruct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_cache\cache_lock_interface::__destruct </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans up any left over locks. </p>
<p>This function MUST clean up any locks that have been acquired and not released during processing. Although the situation of acquiring a lock and not releasing it should be insanely rare we need to deal with it. Things such as unfortunate timeouts etc could cause this situation. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab1a1e51d47090cfb16978d2702e52498" name="ab1a1e51d47090cfb16978d2702e52498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a1e51d47090cfb16978d2702e52498">&#9670;&#160;</a></span>check_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_cache\cache_lock_interface::check_state </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ownerid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the state of the given key. </p>
<p>Returns true if the key is locked and belongs to the ownerid. Returns false if the key is locked but does not belong to the ownerid. Returns null if there is no lock</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>The key we are checking for. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ownerid</td><td>The identifier so we can check if we have the lock or if it is someone else. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if this code has the lock, false if there is a lock but this code doesn't have it, null if there is no lock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a531f090e5d8672f97da3e9e2831b4d80" name="a531f090e5d8672f97da3e9e2831b4d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531f090e5d8672f97da3e9e2831b4d80">&#9670;&#160;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_cache\cache_lock_interface::lock </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ownerid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$block</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquires a lock on a given key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>The key to acquire a lock for. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ownerid</td><td>An unique identifier for the owner of this lock. It is entirely optional for the cache lock plugin to use this. Each implementation can decide for themselves. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$block</td><td>If set to true the application will wait until a lock can be acquired </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the lock can be acquired false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a472ca5c79f1812d640cb8e045fde2e81" name="a472ca5c79f1812d640cb8e045fde2e81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a472ca5c79f1812d640cb8e045fde2e81">&#9670;&#160;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_cache\cache_lock_interface::unlock </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ownerid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$forceunlock</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the lock held on a certain key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>The key to release the lock for. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ownerid</td><td>An unique identifier for the owner of this lock. It is entirely optional for the cache lock plugin to use this. Each implementation can decide for themselves. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$forceunlock</td><td>If set to true the lock will be removed if it exists regardless of whether or not we own it. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>cache/classes/<b>cache_lock_interface.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 15 2025 03:53:42 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
