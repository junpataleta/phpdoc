<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\navigation\output\primary Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;5.1</span>
   </div>
   <div id="projectbrief">Moodle 5.1dev (Build: 20250613) (c42efe971fe)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><b>navigation</b></li><li class="navelem"><a class="el" href="../../d3/dde/namespacecore_1_1navigation_1_1output.html">output</a></li><li class="navelem"><a class="el" href="../../d5/d23/classcore_1_1navigation_1_1output_1_1primary.html">primary</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="../../d8/dce/classcore_1_1navigation_1_1output_1_1primary-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\navigation\output\primary Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for core\navigation\output\primary:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d5/d23/classcore_1_1navigation_1_1output_1_1primary.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae3ba120552c8c25fa7988811d44f9473" id="r_ae3ba120552c8c25fa7988811d44f9473"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3ba120552c8c25fa7988811d44f9473">__construct</a> ($page)</td></tr>
<tr class="memdesc:ae3ba120552c8c25fa7988811d44f9473"><td class="mdescLeft">&#160;</td><td class="mdescRight">primary constructor.  <br /></td></tr>
<tr class="separator:ae3ba120552c8c25fa7988811d44f9473"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ddccf11bda34defdd452705a5415e0" id="r_a50ddccf11bda34defdd452705a5415e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50ddccf11bda34defdd452705a5415e0">export_for_template</a> (?renderer_base $output=null)</td></tr>
<tr class="memdesc:a50ddccf11bda34defdd452705a5415e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Combine the various menus into a standardized output.  <br /></td></tr>
<tr class="separator:a50ddccf11bda34defdd452705a5415e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad25c78a4f62be34771660bd1c803c3b5" id="r_ad25c78a4f62be34771660bd1c803c3b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad25c78a4f62be34771660bd1c803c3b5">get_user_menu</a> (renderer_base $output)</td></tr>
<tr class="memdesc:ad25c78a4f62be34771660bd1c803c3b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get/Generate the user menu.  <br /></td></tr>
<tr class="separator:ad25c78a4f62be34771660bd1c803c3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a1796219b6a3198da843f877dc80e794d" id="r_a1796219b6a3198da843f877dc80e794d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1796219b6a3198da843f877dc80e794d">flag_active_nodes</a> (object $node, bool $expandedmenu=false)</td></tr>
<tr class="memdesc:a1796219b6a3198da843f877dc80e794d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursive checks if any of the children is active.  <br /></td></tr>
<tr class="separator:a1796219b6a3198da843f877dc80e794d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72497bd77190a76f0676049875e0bfb1" id="r_a72497bd77190a76f0676049875e0bfb1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72497bd77190a76f0676049875e0bfb1">get_custom_menu</a> (renderer_base $output)</td></tr>
<tr class="memdesc:a72497bd77190a76f0676049875e0bfb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom menu items reside on the same level as the original nodes.  <br /></td></tr>
<tr class="separator:a72497bd77190a76f0676049875e0bfb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24542e3d8b64f90c775866ca79a436f0" id="r_a24542e3d8b64f90c775866ca79a436f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24542e3d8b64f90c775866ca79a436f0">get_primary_nav</a> ($parent=null)</td></tr>
<tr class="memdesc:a24542e3d8b64f90c775866ca79a436f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the primary nav object and standardize the output.  <br /></td></tr>
<tr class="separator:a24542e3d8b64f90c775866ca79a436f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c16b81891f097b5ccab52aadb4ffbcc" id="r_a1c16b81891f097b5ccab52aadb4ffbcc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c16b81891f097b5ccab52aadb4ffbcc">merge_primary_and_custom</a> (array $<a class="el" href="../../d5/d23/classcore_1_1navigation_1_1output_1_1primary.html">primary</a>, array $custom, bool $expandedmenu=false)</td></tr>
<tr class="memdesc:a1c16b81891f097b5ccab52aadb4ffbcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">When defining custom menu items, the active flag is not obvserved correctly.  <br /></td></tr>
<tr class="separator:a1c16b81891f097b5ccab52aadb4ffbcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section copyright"><dt>Copyright</dt><dd>2021 onwards Peter Dias </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae3ba120552c8c25fa7988811d44f9473" name="ae3ba120552c8c25fa7988811d44f9473"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3ba120552c8c25fa7988811d44f9473">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\navigation\output\primary::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$page</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>primary constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dc/ded/classmoodle__page.html">moodle_page</a></td><td class="paramname">$page</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a50ddccf11bda34defdd452705a5415e0" name="a50ddccf11bda34defdd452705a5415e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ddccf11bda34defdd452705a5415e0">&#9670;&#160;</a></span>export_for_template()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\navigation\output\primary::export_for_template </td>
          <td>(</td>
          <td class="paramtype">?renderer_base</td>          <td class="paramname"><span class="paramname"><em>$output</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Combine the various menus into a standardized output. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">renderer_base&#160;|&#160;null</td><td class="paramname">$output</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1796219b6a3198da843f877dc80e794d" name="a1796219b6a3198da843f877dc80e794d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1796219b6a3198da843f877dc80e794d">&#9670;&#160;</a></span>flag_active_nodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\navigation\output\primary::flag_active_nodes </td>
          <td>(</td>
          <td class="paramtype">object</td>          <td class="paramname"><span class="paramname"><em>$node</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$expandedmenu</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recursive checks if any of the children is active. </p>
<p>If that's the case this node (the parent) is active as well. If the node has no children, check if the node itself is active. Use pass by reference for the node object because we actively change/set the "isactive" flag inside the method and this needs to be kept at the callers side. Set $expandedmenu to true, if the mobile menu is done, in this case the active flag gets the node that is actually active, while the parent hierarchy of the active node gets the flag isopen.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">$node</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$expandedmenu</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72497bd77190a76f0676049875e0bfb1" name="a72497bd77190a76f0676049875e0bfb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72497bd77190a76f0676049875e0bfb1">&#9670;&#160;</a></span>get_custom_menu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\navigation\output\primary::get_custom_menu </td>
          <td>(</td>
          <td class="paramtype">renderer_base</td>          <td class="paramname"><span class="paramname"><em>$output</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Custom menu items reside on the same level as the original nodes. </p>
<p>Fetch and convert the nodes to a standardised array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">renderer_base</td><td class="paramname">$output</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a24542e3d8b64f90c775866ca79a436f0" name="a24542e3d8b64f90c775866ca79a436f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24542e3d8b64f90c775866ca79a436f0">&#9670;&#160;</a></span>get_primary_nav()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\navigation\output\primary::get_primary_nav </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$parent</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the primary nav object and standardize the output. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dd/de3/classnavigation__node.html" title="This class is used to represent a node in a navigation tree.">navigation_node</a>&#160;|&#160;null</td><td class="paramname">$parent</td><td>used for nested nodes, by default the primarynav node </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad25c78a4f62be34771660bd1c803c3b5" name="ad25c78a4f62be34771660bd1c803c3b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad25c78a4f62be34771660bd1c803c3b5">&#9670;&#160;</a></span>get_user_menu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\navigation\output\primary::get_user_menu </td>
          <td>(</td>
          <td class="paramtype">renderer_base</td>          <td class="paramname"><span class="paramname"><em>$output</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get/Generate the user menu. </p>
<p>This is leveraging the data from user_get_user_navigation_info and the logic in $OUTPUT-&gt;user_menu()</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">renderer_base</td><td class="paramname">$output</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1c16b81891f097b5ccab52aadb4ffbcc" name="a1c16b81891f097b5ccab52aadb4ffbcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c16b81891f097b5ccab52aadb4ffbcc">&#9670;&#160;</a></span>merge_primary_and_custom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\navigation\output\primary::merge_primary_and_custom </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$primary</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$custom</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$expandedmenu</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When defining custom menu items, the active flag is not obvserved correctly. </p>
<p>Therefore, the merge of the primary and custom navigation must be handled a bit smarter. Change the "isactive" flag of the nodes (this may set by default in the primary nav nodes but is entirely missing in the custom nav nodes). Set the $expandedmenu argument to true when the menu for the mobile template is build.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$primary</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$custom</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$expandedmenu</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/navigation/output/<b>primary.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 15 2025 03:53:13 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
